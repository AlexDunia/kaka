import{_ as k,u as C,r as p,o as m,a as b,w,b as x,c as S,d as t,e,f as E,v as q,g as F,h as B,t as h,i as v,F as $,j as A,k as r,l as M,E as N}from"./index-zamAbP8G.js";const V={class:"search-page"},R={class:"search-hero"},T={class:"container"},j={class:"search-hero__content"},D={class:"search-hero__search"},K={class:"search-hero__categories"},P={class:"search-results"},U={class:"container"},I={class:"search-results__header"},L={class:"section-title"},z={key:0},G={key:1},H={key:2},J={key:3,class:"search-results__count"},O={key:0,class:"loading"},Q={key:1,class:"error"},W={key:2,class:"no-results"},X={key:3,class:"search-results__grid"},Y={__name:"SearchPage",setup(Z){const a=C(),f=b(),_=x(),o=p(""),c=p(!0),u=p(null);m(async()=>{f.query.q?(o.value=f.query.q,await d()):(await a.fetchAllEvents(),c.value=!1)}),w(o,l=>{l&&_.push({query:{q:l}})});const d=async()=>{if(!o.value.trim()){await a.resetFilters(),_.push({query:{}});return}try{c.value=!0,await a.searchEvents(o.value)}catch(l){u.value=l.message||"Search failed"}finally{c.value=!1}},i=async l=>{try{c.value=!0,await a.fetchEventsByCategory(l)}catch(s){u.value=s.message||"Failed to filter events"}finally{c.value=!1}},y=async()=>{o.value="",await a.resetFilters(),_.push({query:{}})},g=S(()=>a.events.length);return(l,s)=>(r(),t("div",V,[e("section",R,[e("div",T,[e("div",j,[s[7]||(s[7]=e("h1",{class:"search-hero__title"},"Search Events",-1)),s[8]||(s[8]=e("p",{class:"search-hero__subtitle"},"Find your next unforgettable experience",-1)),e("div",D,[E(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=n=>o.value=n),onKeyup:F(d,["enter"]),placeholder:"Search events, artists, or venues...",class:"search-hero__search-input"},null,544),[[q,o.value]]),e("button",{onClick:d,class:"search-hero__search-button"},s[6]||(s[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1)]))]),e("div",K,[e("button",{onClick:y,class:"search-hero__category-tag"},"All"),e("button",{onClick:s[1]||(s[1]=n=>i("music")),class:"search-hero__category-tag"}," Music "),e("button",{onClick:s[2]||(s[2]=n=>i("sports")),class:"search-hero__category-tag"}," Sports "),e("button",{onClick:s[3]||(s[3]=n=>i("theatre")),class:"search-hero__category-tag"}," Theatre "),e("button",{onClick:s[4]||(s[4]=n=>i("movies")),class:"search-hero__category-tag"}," Movies "),e("button",{onClick:s[5]||(s[5]=n=>i("festivals")),class:"search-hero__category-tag"}," Festivals ")])])])]),e("section",P,[e("div",U,[e("div",I,[e("h2",L,[o.value?(r(),t("span",z,'Search Results for "'+h(o.value)+'"',1)):v(a).currentCategory!=="all"?(r(),t("span",G,h(v(a).currentCategory.charAt(0).toUpperCase()+v(a).currentCategory.slice(1))+" Events ",1)):(r(),t("span",H,"All Events")),g.value>0?(r(),t("span",J,"("+h(g.value)+")",1)):B("",!0)])]),c.value?(r(),t("div",O,s[9]||(s[9]=[e("div",{class:"loading__spinner"},null,-1),e("p",null,"Searching for events...",-1)]))):u.value?(r(),t("div",Q,[e("p",null,h(u.value),1),e("button",{onClick:y,class:"error__button"},"Try again")])):g.value===0?(r(),t("div",W,[s[10]||(s[10]=e("p",null,"No events found matching your search criteria",-1)),e("button",{onClick:y,class:"no-results__button"},"Clear filters")])):(r(),t("div",X,[(r(!0),t($,null,A(v(a).events,n=>(r(),t("div",{key:n.id,class:"search-results__item"},[M(N,{event:n},null,8,["event"])]))),128))]))])])]))}},se=k(Y,[["__scopeId","data-v-d93de10b"]]);export{se as default};
