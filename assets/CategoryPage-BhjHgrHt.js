import{_ as q,u as U,y as F,r as y,e as V,w as b,z as G,d as h,c as a,a as t,A as c,m as x,S as $,s as j,t as u,b as K,F as L,j as B,o as r,E as H,n as J,B as O}from"./index-DyY8Ujzr.js";const Q={class:"category-page"},R={key:0,class:"skeleton-hero-container"},W={class:"container"},X={class:"category-hero__content"},Y={class:"category-hero__title"},Z={class:"category-hero__description"},ee={class:"container"},te={class:"category-events"},oe={key:0,class:"category-events__content"},se={key:1,class:"category-events__error"},ae={key:2,class:"category-events__empty"},re={key:3,class:"category-events__content"},ne={class:"category-events__grid"},ie={key:0,class:"pagination"},le=["disabled"],ce={class:"pagination__pages"},ge=["onClick"],de=["disabled"],ue={__name:"CategoryPage",props:{category:{type:String,required:!0}},setup(S){const n=S,l=U(),{isLoading:g,startLoading:C}=F(),{isLoading:v,startLoading:P}=F(),d=y(null),_=()=>{d.value&&clearTimeout(d.value),d.value=setTimeout(()=>{v.value&&(console.warn("Safety timeout: forcing initialLoad to complete"),v.value=!1),g.value&&(console.warn("Safety timeout: forcing loading to complete"),g.value=!1)},5e3)},p=y(null),i=y(1),E=y("rgba(255, 255, 255, 0.08)"),{updatePageTitle:z,updateMetaDescription:D,updateSocialMeta:T}=O();V(async()=>{_();try{await P(async()=>{try{await f()}catch(e){console.error("Failed to load events:",e)}})}catch(e){console.error("Error in initialLoad:",e),v.value=!1}}),b(()=>n.category,async()=>{i.value=1,_();try{await C(f)}catch(e){console.error("Error loading category:",e),g.value=!1}}),b(()=>i.value,async()=>{_();try{await C(f)}catch(e){console.error("Error loading page:",e),g.value=!1}}),G(()=>{d.value&&clearTimeout(d.value)});const f=async()=>{try{p.value=null,console.log("Loading events for category:",n.category);let e=n.category;const o={comedy:"theatre"};o[e]&&(console.log(`Mapping category '${e}' to '${o[e]}' to match database schema`),e=o[e]),await l.fetchEventsByCategory(e,!0,i.value),console.log(`Found ${l.events.length} events for category ${e}`),l.events.length>0&&console.log("Sample event categories:",l.events.map(s=>s.category))}catch(e){throw p.value=e.message||`Failed to load ${n.category} events`,console.error("Error in loadEvents:",e),e}},k=e=>{i.value=e,window.scrollTo({top:0,behavior:"smooth"})},A=h(()=>n.category.charAt(0).toUpperCase()+n.category.slice(1)),I=h(()=>({music:"Browse and book tickets for the hottest concerts and music festivals.",movies:"Find screenings and premieres for the latest blockbusters and indie films.",theatre:"Discover amazing theatrical performances and comedy shows.",sports:"Get tickets to exciting sporting events and championships.",festivals:"Experience the best festivals for food, culture, and entertainment.",others:"Explore other unique events that don't fit traditional categories."})[n.category]||"Browse events in this category."),M=h(()=>({music:"https://res.cloudinary.com/dnuhjsckk/image/upload/v1747097418/music-category_f6fy9i.jpg",movies:"https://res.cloudinary.com/dnuhjsckk/image/upload/v1747097418/movies-category_w2sn0t.jpg",theatre:"https://res.cloudinary.com/dnuhjsckk/image/upload/v1747097418/theatre-category_gx8jfo.jpg",sports:"https://res.cloudinary.com/dnuhjsckk/image/upload/v1747097417/sports-category_zmpzhs.jpg",festivals:"https://res.cloudinary.com/dnuhjsckk/image/upload/v1747097418/festivals-category_azddzu.jpg",others:"https://res.cloudinary.com/dnuhjsckk/image/upload/v1747097418/others-category_qhjofb.jpg"})[n.category]||"https://res.cloudinary.com/dnuhjsckk/image/upload/v1747097418/others-category_qhjofb.jpg"),m=h(()=>({music:{from:"#1DB954",to:"#116e32"},movies:{from:"#E50914",to:"#831010"},theatre:{from:"#FF5F6D",to:"#9b3642"},sports:{from:"#3A86FF",to:"#1c428a"},festivals:{from:"#FF9E00",to:"#8f5700"},others:{from:"#8E44AD",to:"#532865"}})[n.category]||{from:"#8E44AD",to:"#532865"}),N={music:"https://example.com/images/music-category.jpg",movies:"https://example.com/images/movies-category.jpg",theatre:"https://example.com/images/theatre-category.jpg",sports:"https://example.com/images/sports-category.jpg",festivals:"https://example.com/images/festivals-category.jpg",others:"https://example.com/images/others-category.jpg"};return b(()=>n.category,e=>{if(e){const s=`${e.charAt(0).toUpperCase()+e.slice(1)} Events`,w=`Find and book tickets for the best ${e} events near you.`;z(s),D(w),T({title:`${s} | Kaka`,description:w,url:window.location.href,image:N[e]||"https://res.cloudinary.com/dnuhjsckk/image/upload/v1747056280/tdlogowhite_fvgocv.png"})}},{immediate:!0}),(e,o)=>(r(),a("div",Q,[c(v)?(r(),a("div",R,[x($,{type:"banner",color:E.value},null,8,["color"])])):(r(),a("div",{key:1,class:"category-hero",style:j({backgroundImage:`linear-gradient(to bottom, rgba(0, 0, 0, 0.7), rgba(18, 18, 24, 0.95)), url(${M.value})`})},[t("div",{class:"category-hero__gradient",style:j({background:`linear-gradient(120deg, ${m.value.from}40, ${m.value.to}60)`})},null,4),t("div",W,[t("div",X,[t("h1",Y,u(A.value)+" Events",1),t("p",Z,u(I.value),1)])])],4)),t("div",ee,[t("section",te,[c(g)?(r(),a("div",oe,[x($,{type:"grid",color:E.value,count:3},null,8,["color"])])):p.value?(r(),a("div",se,[o[2]||(o[2]=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),t("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),t("p",null,u(p.value),1)])):c(l).events.length===0?(r(),a("div",ae,[o[3]||(o[3]=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("line",{x1:"8",y1:"12",x2:"16",y2:"12"})],-1)),t("p",null,"No "+u(n.category)+" events found at the moment.",1),o[4]||(o[4]=t("p",null,"Please check back later or explore other categories.",-1))])):(r(),a("div",re,[t("div",ne,[(r(!0),a(L,null,B(c(l).events,s=>(r(),a("div",{key:s.id,class:"category-events__item"},[x(H,{event:s},null,8,["event"])]))),128))]),c(l).totalPages>1?(r(),a("div",ie,[t("button",{class:"pagination__btn",disabled:i.value===1,onClick:o[0]||(o[0]=s=>k(i.value-1))},o[5]||(o[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("polyline",{points:"15 18 9 12 15 6"})],-1),t("span",null,"Previous",-1)]),8,le),t("div",ce,[(r(!0),a(L,null,B(c(l).totalPages,s=>(r(),a("button",{key:s,class:J(["pagination__page",{"pagination__page--active":s===i.value}]),onClick:w=>k(s),style:j(s===i.value?{backgroundColor:m.value.from,borderColor:m.value.from}:{})},u(s),15,ge))),128))]),t("button",{class:"pagination__btn",disabled:i.value===c(l).totalPages,onClick:o[1]||(o[1]=s=>k(i.value+1))},o[6]||(o[6]=[t("span",null,"Next",-1),t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("polyline",{points:"9 18 15 12 9 6"})],-1)]),8,de)])):K("",!0)]))])])]))}},pe=q(ue,[["__scopeId","data-v-31bbdd53"]]);export{pe as default};
